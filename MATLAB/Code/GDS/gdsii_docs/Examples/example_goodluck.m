%
% Illustrates the 'gdsii_pattern' function, which simplifies
% the creation of structures that consist of boundary elements.
%

clear all

% a set of closed polygons
xy{1} = [148.686,30.274;153.947,40.874;173.239,54.364;188.146,66.890; ...
         204.807,81.344;222.344,94.834;232.867,98.688;245.143,95.797; ...
         252.159,83.271;248.651,63.036;243.390,46.655;230.236,36.056; ...
         217.960,30.274;203.053,26.420;189.899,22.566;174.115,19.675; ...
         167.100,19.675;158.331,19.675;150.439,22.566;148.686, ...
         30.274];

xy{2} = [320.162,76.655; 321.062,80.455; 332.769,89.007; 348.978,93.757; ...
         366.087,96.608; 386.799,93.757; 406.610,89.007; 426.421,83.306; ...
         445.332,78.555; 471.447,73.804; 495.760,66.203; 513.770,57.652; ...
         511.069,45.300; 497.561,40.549; 479.551,35.798; 461.541,37.698; ...
         439.929,44.349; 421.919,50.050; 405.710,54.801; 381.396,61.452; ...
         353.480,68.103; 329.167,71.904; 320.162,76.655];

xy{3} = [366.42,266.75; 365.56,265.80; 377.62,263.91; 405.18,259.17; ...
         432.73,254.43; 455.99,251.59; 480.10,248.75; 494.74,246.85; ...
         502.49,245.91; 505.93,239.27; 497.32,231.69; 491.29,226.01; ...
         493.02,217.48; 499.91,201.37; 509.38,184.32; 520.57,173.89; ...
         524.02,159.68; 517.99,146.42; 502.49,140.73; 481.82,128.41; ...
         458.57,128.41; 437.04,135.05; 427.57,138.84; 396.56,146.42; ...
         342.31,159.68; 331.98,154.94; 316.47,152.10; 305.28,152.10; ...
         300.11,157.79; 303.56,167.26; 310.45,180.53; 315.61,192.84; ...
         321.64,212.74; 328.53,235.48; 335.42,257.28; 339.73,268.65; ...
         350.06,278.12; 353.51,283.81; 356.95,282.86; 360.40,274.33; ...
         361.26,265.80; 358.67,242.12; 355.23,225.06; 353.51,214.64; ...
         350.92,199.48; 349.20,188.11; 347.48,179.58; 374.17,172.00; ...
         405.18,168.21; 431.01,162.52; 446.51,157.79; 456.85,159.68; ...
         464.60,168.21; 462.01,188.11; 460.29,206.11; 457.71,223.17; ...
         442.21,227.90; 418.09,233.59; 399.15,238.33; 381.06,241.17; ...
         365.56,244.96; 366.42,266.75];

xy{4} = [192.38,312.61; 200.17,325.82; 208.83,339.03; 220.09,351.30; ...
         231.35,359.79; 240.01,356.02; 243.47,346.58; 240.87,332.43; ...
         235.68,322.99; 223.55,313.56; 211.43,306.95; 201.90,304.12; ...
         195.84,301.29; 194.11,306.95; 192.38,311.67];

xy{5} = [25.92103,228.54660; 23.29036,222.96236; 32.05926,232.26943; ...
         42.58194,239.71509; 57.48906,248.09146; 67.13485,249.95287; ...
         82.91886,246.23004; 114.48689,234.13085; 139.91669,223.89306; ...
         167.97716,211.79387; 177.62295,210.86316; 183.76118,214.58599; ...
         177.62295,233.20014; 159.20826,263.91349; 128.51713,306.72603; ...
         99.57977,344.88504; 65.38107,383.04405; 31.18237,417.48022; ...
         3.99879,441.67862; 0.49123,444.47074; 3.99879,449.12428; ...
         18.90591,442.60932; 45.21261,426.78730; 73.27308,404.45032; ...
         93.44154,388.62829; 114.48689,367.22202; 128.51713,351.39999; ...
         138.16291,339.30079; 146.05492,364.42990; 150.43937,397.00466; ...
         149.56248,428.64871; 146.93181,461.22347; 138.16291,502.17460; ...
         134.65535,522.65017; 135.53224,540.33361; 142.54736,557.08635; ...
         152.19315,571.97767; 158.33138,574.76979; 164.46960,572.90837; ...
         171.48472,564.53201; 177.62295,543.12573; 180.25362,517.06592; ...
         181.13051,487.28328; 182.00740,447.26286; 182.00740,416.54951; ...
         183.76118,388.62829; 184.63807,372.80626; 189.02251,359.77636; ...
         184.63807,351.39999; 176.74606,342.09292; 167.10027,329.06301; ...
         154.82382,319.75594; 163.59271,306.72603; 176.74606,289.04259; ...
         210.06787,241.57651; 221.46743,229.47731; 233.74389,215.51670; ...
         244.26656,209.00175; 252.15857,202.48679; 256.54302,198.76396; ...
         253.03546,190.38760; 242.51279,182.01123; 225.85188,171.77345; ...
         213.57543,167.11991; 202.17586,166.18920; 189.02251,173.63486; ...
         174.99228,182.01123; 157.45449,192.24901; 136.40913,198.76396; ...
         114.48689,205.27892; 92.56465,208.07104; 71.51930,211.79387; ...
         47.84327,215.51670; 33.81304,216.44740; 25.04414,215.51670; ...
         22.41347,222.03165; 25.92103,228.54660];

xy{6} = [339.97,425.86; 346.38,431.44; 353.71,435.16; 367.44,432.37; ...
         383.92,430.51; 399.48,426.79; 400.40,447.26; 401.31,469.60; ...
         401.31,481.70; 430.61,477.05; 430.61,461.22; 432.44,444.47; ...
         432.44,422.13; 451.67,418.41; 468.14,414.69; 485.54,410.03; ...
         491.03,402.59; 484.62,394.21; 470.89,388.63; 457.16,386.77; ...
         435.19,391.42; 434.27,372.81; 435.19,350.47; 435.19,343.95; ...
         426.03,336.51; 422.37,332.79; 392.16,339.30; 396.73,355.12; ...
         397.65,370.94; 399.48,389.56; 398.57,401.66; 386.66,406.31; ...
         374.76,409.10; 361.03,411.90; 345.47,417.48; 341.80,419.34; ...
         338.14,422.13; 340.89,425.86; 339.97,425.86];

xy{7} = [258.77,323.48; 271.19,347.68; 280.74,377.46; 288.39,419.34; ...
         290.30,452.85; 292.21,479.84; 296.03,508.69; 310.36,528.23; ...
         323.73,535.68; 331.37,527.30; 332.33,518.93; 330.42,493.80; ...
         326.60,457.50; 321.82,424.00; 317.05,378.39; 318.00,350.47; ...
         347.62,343.95; 389.65,336.51; 421.17,328.13; 465.12,319.76; ...
         497.60,316.03; 520.53,316.03; 531.04,327.20; 533.90,346.75; ...
         532.95,383.97; 530.08,406.31; 526.26,443.54; 520.53,473.32; ...
         512.89,489.14; 496.65,484.49; 484.23,475.18; 462.25,475.18; ...
         430.73,479.84; 401.11,486.35; 365.77,491.01; 338.06,494.73; ...
         338.06,518.93; 367.68,513.34; 391.56,513.34; 433.59,505.90; ...
         464.16,503.11; 490.91,502.17; 503.33,532.89; 511.93,554.29; ...
         524.35,564.53; 533.90,557.09; 545.37,539.40; 556.83,500.31; ...
         562.56,463.08; 568.29,417.48; 574.03,381.18; 577.85,357.91; ...
         586.45,333.72; 592.18,324.41; 592.18,304.86; 582.62,299.28; ...
         563.52,287.18; 545.37,277.87; 526.26,275.08; 507.15,280.67; ...
         476.58,290.90; 444.10,300.21; 414.49,304.86; 374.36,312.31; ...
         331.37,319.76; 294.12,322.55; 278.83,316.03; 268.32,313.24; ...
         259.73,314.17; 257.82,321.62; 258.77,323.48];

% turn them upside down 
for k=1:length(xy) 
   B = xy{k}; 
   B(:,2) = 596 - B(:,2); 
   xy{k} = B; 
end
        
% write them to a GDS II file as boundary elements 
G = gdsii_pattern('GOODLUCK', xy);
write_gds_library( gds_library('GOODLUCK.DB',G), '!goodluck.gds');
